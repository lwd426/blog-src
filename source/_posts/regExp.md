title: 正则表达式总结
date: 2013-06-05 10:09:03
tags:
- 学习笔记
- javascript
categories: 学习笔记

---

>本文导读：正则表达式是个很有力的字符处理工具，真的该好好学、好好用。

### 字符串的一般操作（javascript）

1. indexOf : 查找字符串在指定字符串的位置 （demo: '1234567890'.indexOf('3') === 2 || '123456a7890'.indexOf('c') === -1）
2. charAt : 获取指定位置的字符 （'1234567890'.charAt(2) //'3'）
3. substring : 获取子字符串 （'1234567890'.substring(2,5) //'345'）
4. split : 分隔字符串，获得数组 （'1234567890'.split('5') //['1234','67890'])

### 什么是正则表达式
<!-- more -->
1. 正则表达式是**给计算机（js引擎）制定一种规则，告诉它按照此规则去解析字符串**。就跟人一看apple就知道是苹果一样，让计算机能够认识apple
2. 正则表达式是一种**强大的字符串匹配（和操作）**工具
3. 定义：
    - new RegExp('\d+') : 当正则表达式中有变量的时候，必须用这种方法
    - /\d+/: 一般用这种方式

### 正则表达式的几种用法
| 方法名 | 定义  | 返回值  |  用法 | example | 
|---------|---------|---------|---------|---------|
| test | 字符串判断 | 返回真假 | 正则.test(字符串) |  /b/.test('abcdef') //true |
| match| 获取匹配的项目 | 返回数组 | 字符串.match(正则) | 'haj123sdk54hask33dkhalsd879'.match(/\d+/g) //['123','54','33','879'] |
| search | 正则去匹配字符串 | 返回出现的位置(否则返回-1) | 字符串.search(正则)  | 'abcdef'.search(/b/i) //1 |
| replace| 替换所有匹配 | 返回替换后的字符串 | 字符串.replace(正则,想替换的) | 'aaa'.replace(/a+/,'b') //b |

说明：
1. 正则默认：正则匹配成功就会结束，不会继续匹配; 如果想全部查找，就要加标识 **g**(全局匹配)
2. 是区分大小写的，如果不区分大小写的话，在正则的最后加标识 **i** 
3. 量词 : 匹配不确定的位置 
    - \+ : 至少出现一次
    - \* : 0 到多次


### 高级匹配

1. 量词：
    - 出现的次数。{n,m}，至少出现n次，最多m次
    - 常用量词
        - {n,}	至少n次
        - \*		任意次	{0,}
        - ？	零次或一次	{0,1}
        - \+	一次或任意次{1,}
        - {n}	正好n次
2. ^ 开始 $ 结束: 例子: ' test '.replace(/^\s+|\s+$/g, '') // test
4. 转义字符：
    - 特殊字符：n \n r \r t \t
    - \.（点）-- 任意字符
    - 特殊匹配： 
        - \s : 空格
        - \S : 非空格
        - \d : 数字
        - \D : 非数字
        - \w : 字符   ( 字母 ，数字，下划线_ ) example: 'sf我是33让d_sf@!df#$'.match(/\w/g) // ["s", "f", "3", "3", "d", "_", "s", "f", "d", "f"]
        - \W : 非字符 ( 中文， 特殊字符 等) example: 'sf我是33让d_sf@!df#$'.match(/\W/g) // ["我", "是", "让", "@", "!", "#", "$"]
    - 4. \1：重复子项 example: 'sf我是33让d_sf@!d334f#$'.match(/(\w)\1+/g) //['33','33'] 解释：所有匹配到的与第二个匹配项相同的内容重复至少一次
5. 正则表达式中的匹配字符的几种书写方法
    - 任意字符（枚举）： [abc] - 例子：：o[usb]t——obt、ost、out
    - 范围：[a-z]、[0-9] - 例子：例子：id[0-9]——id0、id5
    - 排除：[^a] 例子：o[^0-9]t——oat、o?t、o t
    - 组合: [a-z0-9A-Z] 可以匹配左右的字母和数字（单个），如果要匹配多个要用{a-z0-9A-Z]+
6. 小括号（）的使用意义：定义子项或者分组，用于replace或者match的返回数组的子项定义 
7. replace的第二项可以为回调函数，通过return开完成替换操作，结合子项使用，完成高级的字符串查找和替换目的
8. 匹配子项：
    - 概念: 把正则的整体叫做（母亲）, 然后把左边第一个小括号里面的正则，叫做这个第一个子项(母亲的子项),第二个小括号就是第二个子项，以此类推
    - 说明用法： 
    ```js
    var str = '2013-6-7';
    var re = /(\d+)(-)/g;
    str = str.replace(re,function($0,$1,$2){
    	//第一个参数：$0（母亲）,第二个参数 : $1(第一个孩子)
    	//,第二个参数 : $1(第二个孩子)
    	return $0.substring(0,$0.length-1) + '.';
    	
    });
    alert( str );   //2013.6.7
    ```
    - 注意：当match不加g的时候（也就是非全局匹配）才可以获取到子项的集合 
        - 'abc'.match(/(a)(b)(c)/) //["abc", "a", "b", "c" ]
        - 'abc'.match(/(a)(b)(c)/g) //['abc']

### Usecase

- 匹配中文：[\u4e00-\u9fa5]
- 行首行尾空格：^\s*|\s*$
- Email：^\w+@[a-z0-9]+(\.[a-z]+){1,3}$
- 网址：[a-zA-z]+://[^\s]*
- QQ号：[1-9][0-9]{4,9}
- 邮政编码：[1-9]\d{5}
- 身份证：[1-9]\d{14}|[1-9]\d{17}|[1-9]\d{16}x









